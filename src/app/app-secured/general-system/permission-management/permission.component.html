<div class="row">
    <div class="col-lg-12">
        <ol class="ibox-title breadcrumb">
            <li>
                <a>{{parentPage}}</a>
            </li>
            <li class="active">
                <strong>{{currentPage}}</strong>
            </li>
        </ol>
    </div>
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <!-- <div class="ibox-title">
                <h5>{{currentPage}}</h5>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                </div>
            </div> -->
            <div class="ibox-title">
                <div class="row">
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Module</label>
                            <!-- <select class="select-input form-control" [compareWith]="compareFn" [(ngModel)]="selectedModulePage" (change)="changeModulePage()">
                                <option>-- Chọn module --</option>
                                <option *ngFor="let item of modulePages" [ngValue]="item">{{item.name}}</option>
                            </select> -->
                            <p-dropdown [options]="modulePages" [(ngModel)]="selectedModulePage" (onChange)="changeModulePage()" [style]="{'width':'100%'}" filter="true" emptyFilterMessage="Không tìm thấy dữ liệu"></p-dropdown>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label>Chức vụ</label>
                            <!-- <select class="select-input form-control" [compareWith]="compareFn" [(ngModel)]="selectedRole" (change)="changeRole()">
                                <option>-- Chọn chức vụ --</option>
                                <option *ngFor="let item of roles" [ngValue]="item">{{item.name}}</option>
                            </select> -->
                            <p-dropdown [options]="roles" [(ngModel)]="selectedRole" (onChange)="changeRole()" [style]="{'width':'100%'}" filter="true" emptyFilterMessage="Không tìm thấy dữ liệu"></p-dropdown>
                        </div>
                    </div>
                    <div class="col-sm-3"></div>
                    <div class="col-sm-3">
                        <label>&nbsp;</label>
                        <div class="form-group text-right">
                            <button *ngIf="isEdit" class="btn btn-success" (click)="saveChange()">
                                Lưu thay đổi
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="ibox-content">
                <div class="row">
                    <!-- Start Div Box -->
                    <div class="col-sm-4 no-padding-right" *ngFor="let page of pages">
                        <div class="box-style box-shadow">
                            <h3>
                                <strong>{{page.name}}</strong>
                            </h3>
                            <div style="display: flex;">
                                <div class="ui-grid-col-5">
                                    {{page.name}}
                                </div>
                                <div class="ui-grid-col-7">
                                    <div class="ui-grid-col-7" style="width: 100%">
                                        <span>
                                            <p-checkbox [value]="page.id" [disabled]="!page.isAccess" [(ngModel)]="page.rolePage.isAccess" label="Xem" binary="true"></p-checkbox>
                                        </span>
                                        <span>
                                            <p-checkbox [value]="page.id" [disabled]="!page.isAdd" [(ngModel)]="page.rolePage.isAdd" label="Thêm" binary="true"></p-checkbox>
                                        </span>
                                        <span>
                                            <p-checkbox [value]="page.id" [disabled]="!page.isEdit" [(ngModel)]="page.rolePage.isEdit" label="Sửa" binary="true"></p-checkbox>
                                        </span>
                                        <span>
                                            <p-checkbox [value]="page.id" [disabled]="!page.isDelete" [(ngModel)]="page.rolePage.isDelete" label="Xóa" binary="true"></p-checkbox>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div style="display: flex;" *ngFor="let child of page.children">
                                <div class="ui-grid-col-5">
                                    {{child.name}}
                                </div>
                                <div class="ui-grid-col-7">
                                    <div class="ui-grid-col-7" style="width: 100%">
                                        <span>
                                            <p-checkbox [value]="child.id" [disabled]="!child.isAccess" [(ngModel)]="child.rolePage.isAccess" label="Xem" binary="true"></p-checkbox>
                                        </span>
                                        <span>
                                            <p-checkbox [value]="child.id" [disabled]="!child.isAdd" [(ngModel)]="child.rolePage.isAdd" label="Thêm" binary="true"></p-checkbox>
                                        </span>
                                        <span>
                                            <p-checkbox [value]="child.id" [disabled]="!child.isEdit" [(ngModel)]="child.rolePage.isEdit" label="Sửa" binary="true"></p-checkbox>
                                        </span>
                                        <span>
                                            <p-checkbox [value]="child.id" [disabled]="!child.isDelete" [(ngModel)]="child.rolePage.isDelete" label="Xóa" binary="true"></p-checkbox>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Div Box -->
                </div>
            </div>
        </div>
    </div>